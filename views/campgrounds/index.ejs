
<% layout('layouts/boilerplate') %>
  <div id="map" style="height: 500px; width: 100%;"></div>
  <h1 style="position: relative; left:2vw; top: 1%;" >All campgrounds</h1>
  <% for(let c of campList) { %>
    <div class="card mx-5 my-3 col-lg-5" style="max-width: 540px;float: left;">
      <div class="row g-0 p-2">
        <div class="col-md-4">
          <% if(c.image.length!=0) { %>
            <img src="<%= c.image[0].url%>" class="rounded mx-auto d-block " style="height: 26vh;width: 22vh;"
              alt="Img Here">
            <% }else { %>
              <img src="https://images.unsplash.com/photo-1566518447933-8f9399038f23" class="rounded mx-auto d-block "
                style="height: 26vh;width: 22vh;" alt="Img Here">
              <% } %>
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">
              <%= c.title %>
            </h5>
            <p class="card-text">
              <%= c.description.substring(0, 150)%>
            </p>
            <a href="/campgrounds/<%= c.id %>"> <button type="button" class="btn btn-outline-secondary ">View
                More</button> </a>
          </div>
        </div>
      </div>
    </div>
    <% } %>
      <script>
        const mapToken = '<%- process.env.MAPBOX_TOKEN %>'; // So when this runs, it will replace 'process.env.MAPBOX_TOKEN' with the value of it.
        const campgroundsList = { features: <%- JSON.stringify(campList) %>} 
        // in this route all campgrounds are sent via name campList, so we should use this here.
      </script>
      <script src="/javascripts/clusterMaps.js"></script>